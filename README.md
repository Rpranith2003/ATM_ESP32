# ATM_ESP32
Firstly, connect esp 32 to wifi. I have created an initWiFi() function for this. For each time when we have to create or read or update the spreadsheet I have created 3 functions. In these 3 functions I have made API calls by passing the concerned parameters in the API parameter section. Further code has been written in the google app script in which we have to extract the parameters that came with the API call and then perform the read, write and update action according to command parameter in the API. After performing the operations in google sheet we have to inform the user about the same so I am using telegram bot for this by using bot.sendMessage() function.
First we have to create a google spreadsheet and give its script id to esp32.
Then we have to write the google appscript code into the appscript. Google appscript code is basically the code which is used or which gets executed when we call an API on its servers. In this appscript we have to extract the parameters that came with API call, we have to do the required operations on the spreadsheet by referring the API documentation. This was the most important step.
Next we have to create a telegram bot using BOTFATHER and give its bot token to the esp32. Then we have to give our CHAT_ID to the esp32 so that it can send messages to us.
Then we have to create 3 functions for reading , writing and updating google sheets. Read function will return the value of the cell in google sheet in the respective row or column which is passed as the parameters. We will use write function to add a new user to the ATM system and this function will return the UserID of the newly created user. Update function is used to update the cell value in google sheet of respective row and column number passed as the parameters. We will use this update function to update the balance of the user after each transaction.
Till now we have completed writing all our requirements for the main loop function. So now we will write our loop function. In loop ,we have to write a control flow of statements i.e. in loop, there will be various combinations of if-else loops which will handle all the cases of userInput.
And in this way we have created our ATM system.
